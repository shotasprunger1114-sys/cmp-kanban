<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CMP Scripts ‚Äî Kanban</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  @keyframes gradientMove {
    0% { background-position: 0% 50%; }
    25% { background-position: 100% 50%; }
    50% { background-position: 100% 100%; }
    75% { background-position: 0% 100%; }
    100% { background-position: 0% 50%; }
  }
  body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: linear-gradient(135deg, #0a0a0a, #1a0a2e, #0d0d0d, #15062b, #0a0a0a, #1e0938); background-size: 400% 400%; animation: gradientMove 20s ease infinite; color: #e0e0e0; padding: 20px; min-height: 100vh; }
  h1 { font-size: 24px; margin-bottom: 4px; color: #fff; }
  .subtitle { color: #888; font-size: 14px; margin-bottom: 24px; }
  .board { gap: 16px; overflow-x: auto; padding-bottom: 20px; -webkit-overflow-scrolling: touch; }
  .board-view { display: flex; }
  .board-view.hidden { display: none !important; }
  .column { min-width: 280px; max-width: 300px; flex-shrink: 0; background: rgba(20, 16, 30, 0.85); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border: 1px solid rgba(100, 60, 180, 0.1); border-radius: 12px; padding: 16px; min-height: 200px; transition: background 0.2s; }
  .column.drag-over { background: rgba(40, 25, 60, 0.9); }
  .column-header { display: flex; align-items: center; gap: 8px; margin-bottom: 14px; padding-bottom: 10px; border-bottom: 2px solid #333; }
  .column-header h2 { font-size: 14px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; }
  .column-header .count { background: #333; color: #aaa; font-size: 12px; padding: 2px 8px; border-radius: 10px; font-weight: 600; min-width: 20px; text-align: center; }
  .col-new .column-header { border-color: #6366f1; }
  .col-new .column-header h2 { color: #818cf8; }
  .col-filmed .column-header { border-color: #f59e0b; }
  .col-filmed .column-header h2 { color: #fbbf24; }
  .col-edited .column-header { border-color: #3b82f6; }
  .col-edited .column-header h2 { color: #60a5fa; }
  .col-posted .column-header { border-color: #10b981; }
  .col-posted .column-header h2 { color: #34d399; }
  .cards { min-height: 60px; }
  .card { background: rgba(30, 25, 40, 0.9); border-radius: 10px; padding: 14px; margin-bottom: 10px; border: 1px solid #333; cursor: grab; transition: transform 0.15s, box-shadow 0.15s, opacity 0.2s; user-select: none; -webkit-user-select: none; touch-action: none; }
  .card:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.4); border-color: #555; }
  .card:active { cursor: grabbing; }
  .card.dragging { opacity: 0.4; transform: scale(0.95); }
  .card-title { font-size: 14px; font-weight: 600; color: #fff; margin-bottom: 6px; line-height: 1.3; }
  .card-meta { display: flex; gap: 6px; flex-wrap: wrap; margin-bottom: 8px; }
  .tag { font-size: 11px; padding: 2px 8px; border-radius: 6px; font-weight: 600; }
  .tag-build { background: #2d1f0e; color: #f59e0b; }
  .tag-system { background: #0e2137; color: #3b82f6; }
  .tag-business { background: #1a2e1a; color: #10b981; }
  .tag-hottake { background: #2d0e0e; color: #ef4444; }
  .tag-signature { background: #1f0e2d; color: #a855f7; }
  .card-hook { font-size: 12px; color: #999; line-height: 1.4; font-style: italic; }
  .card-details { font-size: 11px; color: #666; margin-top: 8px; display: flex; justify-content: space-between; align-items: center; }
  .card-expand { font-size: 11px; color: #818cf8; cursor: pointer; font-weight: 600; }
  .card-expand:hover { color: #a5b4fc; }
  .empty { text-align: center; color: #555; font-size: 13px; padding: 30px 10px; font-style: italic; pointer-events: none; }
  .project-filter { display: flex; gap: 8px; margin-bottom: 20px; flex-wrap: wrap; }
  .filter-btn { background: rgba(30, 25, 40, 0.8); border: 1px solid #444; color: #ccc; padding: 6px 14px; border-radius: 8px; font-size: 12px; font-weight: 600; cursor: pointer; transition: all 0.15s; }
  .filter-btn:hover, .filter-btn.active { background: #6366f1; border-color: #6366f1; color: #fff; }
  .stats { display: flex; gap: 12px; margin-bottom: 20px; flex-wrap: wrap; }
  .stat { background: rgba(20, 16, 30, 0.85); padding: 12px 20px; border-radius: 10px; text-align: center; min-width: 80px; }
  .stat-num { font-size: 24px; font-weight: 700; color: #fff; }
  .stat-label { font-size: 11px; color: #888; text-transform: uppercase; letter-spacing: 0.5px; margin-top: 2px; }
  .updated { color: #555; font-size: 11px; text-align: right; margin-top: 16px; }
  .save-indicator { position: fixed; top: 16px; right: 16px; background: #10b981; color: #fff; padding: 8px 16px; border-radius: 8px; font-size: 13px; font-weight: 600; opacity: 0; transition: opacity 0.3s; pointer-events: none; z-index: 100; }
  .save-indicator.show { opacity: 1; }

  /* Project Stats */
  .projects-bar { display: flex; gap: 14px; margin-bottom: 20px; overflow-x: auto; -webkit-overflow-scrolling: touch; padding-bottom: 4px; }
  .project-card { background: rgba(20, 16, 30, 0.85); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border: 1px solid rgba(100, 60, 180, 0.15); border-radius: 14px; padding: 18px 22px; min-width: 280px; flex-shrink: 0; cursor: pointer; transition: all 0.2s; }
  .project-card:hover { border-color: rgba(129, 140, 248, 0.4); transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0,0,0,0.3); }
  .project-card.active { border-color: #818cf8; box-shadow: 0 0 20px rgba(129, 140, 248, 0.15); }
  .project-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 14px; }
  .project-handle { font-size: 15px; font-weight: 700; color: #818cf8; text-decoration: none; display: flex; align-items: center; gap: 6px; }
  .project-handle:hover { color: #a5b4fc; }
  .project-handle .ig-icon { width: 16px; height: 16px; opacity: 0.7; }
  .project-status { font-size: 11px; padding: 3px 8px; border-radius: 6px; font-weight: 600; }
  .status-active { background: rgba(16, 185, 129, 0.15); color: #34d399; }
  .status-new { background: rgba(129, 140, 248, 0.15); color: #818cf8; }
  .project-metrics { display: flex; gap: 16px; flex-wrap: wrap; }
  .project-metric { text-align: center; }
  .project-metric-num { font-size: 20px; font-weight: 800; color: #fff; }
  .project-metric-label { font-size: 10px; color: #666; text-transform: uppercase; letter-spacing: 0.5px; margin-top: 2px; }
  .project-metric-change { font-size: 10px; font-weight: 700; margin-top: 2px; }
  .change-up { color: #10b981; }
  .change-down { color: #ef4444; }
  .change-flat { color: #666; }

  /* View Toggle */
  .view-toggle { display: flex; gap: 4px; background: rgba(20,16,30,0.85); border-radius: 10px; padding: 4px; margin-bottom: 16px; width: fit-content; }
  .view-btn { padding: 8px 18px; border-radius: 8px; font-size: 13px; font-weight: 600; cursor: pointer; border: none; background: transparent; color: #666; transition: all 0.2s; }
  .view-btn.active { background: #818cf8; color: #fff; }
  .view-btn:hover:not(.active) { color: #aaa; }

  /* Calendar */
  .calendar { display: none; }
  .calendar.visible { display: block; }
  .cal-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px; }
  .cal-header { font-size: 12px; font-weight: 700; color: #555; text-transform: uppercase; letter-spacing: 1px; text-align: center; padding: 8px 0; }
  .cal-day { background: rgba(20,16,30,0.85); border: 1px solid rgba(100,60,180,0.1); border-radius: 10px; min-height: 120px; padding: 10px; transition: all 0.2s; }
  .cal-day.today { border-color: #818cf8; box-shadow: 0 0 15px rgba(129,140,248,0.1); }
  .cal-day.has-content { border-color: rgba(100,60,180,0.25); }
  .cal-day-num { font-size: 13px; font-weight: 700; color: #555; margin-bottom: 6px; }
  .cal-day.today .cal-day-num { color: #818cf8; }
  .cal-event { font-size: 11px; padding: 4px 8px; border-radius: 6px; margin-bottom: 4px; font-weight: 600; cursor: pointer; transition: all 0.15s; }
  .cal-event:hover { transform: translateY(-1px); }
  .cal-event.reel { background: rgba(129,140,248,0.15); color: #818cf8; }
  .cal-event.carousel { background: rgba(168,85,247,0.15); color: #a855f7; }
  .cal-event.posted { opacity: 0.5; text-decoration: line-through; }
  .cal-empty { display: none; }
  .cal-month-nav { display: flex; align-items: center; gap: 16px; margin-bottom: 16px; }
  .cal-month-title { font-size: 18px; font-weight: 700; color: #fff; }
  /* Modal */
  .modal-overlay { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); backdrop-filter: blur(4px); -webkit-backdrop-filter: blur(4px); z-index: 200; justify-content: center; align-items: flex-start; padding: 40px 20px; overflow-y: auto; }
  .modal-overlay.open { display: flex; }
  .modal { background: linear-gradient(145deg, #1a1030, #141020); border: 1px solid rgba(100, 60, 180, 0.25); border-radius: 16px; max-width: 680px; width: 100%; padding: 32px; position: relative; box-shadow: 0 20px 60px rgba(0,0,0,0.6); animation: modalIn 0.25s ease; }
  @keyframes modalIn { from { opacity: 0; transform: translateY(20px) scale(0.97); } to { opacity: 1; transform: none; } }
  .modal-close { position: absolute; top: 16px; right: 20px; font-size: 24px; color: #888; cursor: pointer; background: none; border: none; line-height: 1; }
  .modal-close:hover { color: #fff; }
  .modal-title { font-size: 22px; font-weight: 700; color: #fff; margin-bottom: 4px; }
  .modal-pillar { margin-bottom: 20px; margin-top: 8px; }
  .modal-section { margin-bottom: 20px; }
  .modal-section-title { font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; color: #818cf8; margin-bottom: 8px; display: flex; align-items: center; gap: 6px; }
  .modal-section-content { font-size: 14px; line-height: 1.7; color: #ccc; }
  .script-block { background: rgba(40, 30, 60, 0.5); border-left: 3px solid #6366f1; padding: 14px 16px; border-radius: 0 8px 8px 0; margin-bottom: 10px; }
  .script-label { font-size: 11px; font-weight: 700; color: #818cf8; text-transform: uppercase; margin-bottom: 4px; }
  .script-text { font-size: 14px; color: #e0e0e0; line-height: 1.6; }
  .script-block.rehook { border-left-color: #f59e0b; }
  .script-block.rehook .script-label { color: #fbbf24; }
  .caption-box { background: rgba(40, 30, 60, 0.4); border: 1px solid rgba(100, 60, 180, 0.2); border-radius: 10px; padding: 16px; font-size: 13px; line-height: 1.6; color: #ccc; white-space: pre-wrap; }
  .hashtags { color: #818cf8; font-size: 13px; line-height: 1.8; }
  .visual-item { display: flex; gap: 10px; align-items: flex-start; margin-bottom: 10px; }
  .visual-icon { font-size: 18px; flex-shrink: 0; margin-top: 1px; }
  .visual-text { font-size: 13px; color: #ccc; line-height: 1.5; }
  .modal-meta { display: flex; gap: 16px; flex-wrap: wrap; margin-bottom: 20px; }
  .meta-chip { background: rgba(50, 40, 70, 0.6); padding: 6px 12px; border-radius: 8px; font-size: 12px; color: #aaa; }
  .meta-chip strong { color: #e0e0e0; }
  .copy-btn { background: rgba(99, 102, 241, 0.2); border: 1px solid rgba(99, 102, 241, 0.3); color: #818cf8; padding: 4px 10px; border-radius: 6px; font-size: 11px; cursor: pointer; margin-left: 8px; font-weight: 600; }
  .copy-btn:hover { background: rgba(99, 102, 241, 0.4); }
  .copy-btn.copied { background: rgba(16, 185, 129, 0.3); border-color: rgba(16, 185, 129, 0.4); color: #34d399; }

  /* Archive */
  .archive-btn { background: rgba(107,114,128,0.15); border: 1px solid rgba(107,114,128,0.3); color: #9ca3af; padding: 4px 10px; border-radius: 6px; font-size: 11px; cursor: pointer; margin-left: 8px; font-weight: 600; }
  .archive-btn:hover { background: rgba(107,114,128,0.3); color: #d1d5db; }
  .restore-btn { background: rgba(99,102,241,0.15); border: 1px solid rgba(99,102,241,0.3); color: #818cf8; padding: 6px 14px; border-radius: 8px; font-size: 12px; cursor: pointer; font-weight: 600; margin-top: 12px; }
  .restore-btn:hover { background: rgba(99,102,241,0.3); }
  .archive-view { display: none; padding: 20px 0; }
  .archive-view.visible { display: block; }
  .archive-view h3 { font-size: 16px; font-weight: 700; color: #9ca3af; margin-bottom: 16px; }
  .archive-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 12px; }
  .archive-card { background: rgba(20,16,30,0.6); border: 1px solid rgba(107,114,128,0.2); border-radius: 10px; padding: 14px; opacity: 0.75; }
  .archive-card:hover { opacity: 1; border-color: rgba(107,114,128,0.4); }
  .archive-card .card-title { font-size: 14px; font-weight: 600; color: #9ca3af; margin-bottom: 6px; }
  .archive-card .card-hook { font-size: 12px; color: #6b7280; font-style: italic; margin-bottom: 10px; line-height: 1.4; }
  .archive-card .archive-date { font-size: 11px; color: #4b5563; margin-bottom: 8px; }
  .view-btn[data-view="archive"] { color: #6b7280; }
  .view-btn[data-view="archive"].active { background: #374151; color: #d1d5db; }
  .col-archived .column-header { border-color: #4b5563; }
  .col-archived .column-header h2 { color: #6b7280; }

  @media (max-width: 768px) {
    body { padding: 12px; }
    h1 { font-size: 20px; }
    .board { gap: 12px; }
    .column { min-width: 260px; }
    .stats { gap: 8px; }
    .stat { padding: 10px 14px; min-width: 70px; }
    .stat-num { font-size: 20px; }
    .modal { padding: 20px; margin: 10px; }
    .modal-title { font-size: 18px; }
  }
</style>
</head>
<body>

<div class="save-indicator" id="saveIndicator">‚úì Saved</div>
<div class="modal-overlay" id="modalOverlay" onclick="if(event.target===this)closeModal()">
  <div class="modal" id="modal"></div>
</div>

<h1>üìã CMP Script Pipeline</h1>
<p class="subtitle">Create More Productions ‚Äî Drag cards to move ¬∑ Click to view full script</p>

<div class="projects-bar" id="projectsBar"></div>
<div id="statsLastUpdated" style="color:#444;font-size:11px;margin-bottom:12px;margin-top:-8px;">Loading live stats...</div>

<div class="stats">
  <div class="stat"><div class="stat-num" id="stat-new">0</div><div class="stat-label">New</div></div>
  <div class="stat"><div class="stat-num" id="stat-filmed">0</div><div class="stat-label">Filmed</div></div>
  <div class="stat"><div class="stat-num" id="stat-edited">0</div><div class="stat-label">In Edit</div></div>
  <div class="stat"><div class="stat-num" id="stat-posted">0</div><div class="stat-label">Posted</div></div>
</div>

<div class="view-toggle">
  <button class="view-btn active" data-view="board" onclick="switchView('board')">üìã Board</button>
  <button class="view-btn" data-view="calendar" onclick="switchView('calendar')">üìÖ Calendar</button>
  <button class="view-btn" data-view="archive" onclick="switchView('archive')">üóÉÔ∏è Archive</button>
</div>

<div class="board board-view" id="board"></div>
<div class="calendar" id="calendar"></div>
<div class="archive-view" id="archiveView"></div>
<div class="updated" id="updatedText"></div>

<script>
const STORAGE_KEY = 'cmp-kanban-state';

// ===== PROJECT ACCOUNTS =====
const PROJECTS = [
  {
    id: 'brandingwithshota',
    handle: '@brandingwithshota',
    url: 'https://www.instagram.com/brandingwithshota/',
    industry: 'Social Media Agency',
    status: 'active',
    metrics: {
      followers: 36,
      followersChange: null,
      posts: 20,
      avgReach: 210,
      avgReachChange: null,
      engRate: 4.8,
      engRateChange: null,
      topMetric: 'Save Rate',
      topMetricVal: '0.62%',
    },
    lastUpdated: '2026-02-17'
  }
];

function renderProjects() {
  const bar = document.getElementById('projectsBar');
  bar.innerHTML = '';

  // "All" card
  const allCard = document.createElement('div');
  allCard.className = 'project-card' + (currentFilter === 'all' ? ' active' : '');
  allCard.onclick = () => { currentFilter = 'all'; renderProjects(); render(); };
  allCard.innerHTML = `
    <div class="project-header">
      <span style="font-size:15px;font-weight:700;color:#fff;">üìã All Projects</span>
      <span class="project-status status-active">${PROJECTS.length} account${PROJECTS.length > 1 ? 's' : ''}</span>
    </div>
    <div class="project-metrics">
      <div class="project-metric"><div class="project-metric-num">${scripts.filter(s=>s.status!=="archived").length}</div><div class="project-metric-label">Total Scripts</div></div>
      <div class="project-metric"><div class="project-metric-num">${scripts.filter(s=>s.status==='posted').length}</div><div class="project-metric-label">Posted</div></div>
      <div class="project-metric"><div class="project-metric-num">${scripts.filter(s=>s.status==='new').length}</div><div class="project-metric-label">Ready</div></div>
    </div>
  `;
  bar.appendChild(allCard);

  PROJECTS.forEach(p => {
    const card = document.createElement('div');
    card.className = 'project-card' + (currentFilter === p.id ? ' active' : '');
    card.onclick = (e) => {
      if (e.target.closest('.project-handle')) return; // let link work
      currentFilter = p.id;
      renderProjects();
      render();
    };

    const fChange = p.metrics.followersChange !== null
      ? `<div class="project-metric-change ${p.metrics.followersChange > 0 ? 'change-up' : p.metrics.followersChange < 0 ? 'change-down' : 'change-flat'}">${p.metrics.followersChange > 0 ? '+' : ''}${p.metrics.followersChange !== null ? p.metrics.followersChange : '‚Äî'}</div>`
      : '<div class="project-metric-change change-flat">new</div>';

    const rChange = p.metrics.avgReachChange !== null
      ? `<div class="project-metric-change ${p.metrics.avgReachChange > 0 ? 'change-up' : 'change-down'}">${p.metrics.avgReachChange > 0 ? '+' : ''}${p.metrics.avgReachChange}%</div>`
      : '';

    card.innerHTML = `
      <div class="project-header">
        <a class="project-handle" href="${p.url}" target="_blank" rel="noopener">
          <svg class="ig-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"/></svg>
          ${p.handle}
        </a>
        <span class="project-status ${p.status === 'active' ? 'status-active' : 'status-new'}">${p.industry}</span>
      </div>
      <div class="project-metrics">
        <div class="project-metric">
          <div class="project-metric-num">${p.metrics.followers.toLocaleString()}</div>
          <div class="project-metric-label">Followers</div>
          ${fChange}
        </div>
        <div class="project-metric">
          <div class="project-metric-num">${p.metrics.avgReach}</div>
          <div class="project-metric-label">Avg Reach</div>
          ${rChange}
        </div>
        <div class="project-metric">
          <div class="project-metric-num">${p.metrics.engRate}%</div>
          <div class="project-metric-label">Eng Rate</div>
        </div>
        <div class="project-metric">
          <div class="project-metric-num">${p.metrics.posts}</div>
          <div class="project-metric-label">Posts</div>
        </div>
      </div>
    `;
    bar.appendChild(card);
  });
}

const COLUMNS = [
  { id: 'new', label: 'üìù New Scripts', cls: 'col-new' },
  { id: 'filmed', label: 'üé¨ Filmed', cls: 'col-filmed' },
  { id: 'edited', label: '‚úÇÔ∏è In Edit', cls: 'col-edited' },
  { id: 'posted', label: '‚úÖ Posted', cls: 'col-posted' }
];
const BOARD_COLUMNS = COLUMNS; // visible on kanban
const ARCHIVE_STATUS = 'archived';
const PILLAR_TAGS = {
  'Build in Public': { cls: 'tag-build', icon: 'üî®' },
  'The System': { cls: 'tag-system', icon: 'üéØ' },
  'The Business Case': { cls: 'tag-business', icon: 'üí∞' },
  'Hot Takes': { cls: 'tag-hottake', icon: 'üî•' },
  'Signature Series': { cls: 'tag-signature', icon: '‚ú®' }
};

const DEFAULT_SCRIPTS = [
  {
    id: 'b001-01', title: 'Never Paid Myself', project: 'brandingwithshota',
    pillar: 'Build in Public', duration: '45-60s', batch: '001', status: 'filmed',
    topic: 'Sacrificing personal pay to reinvest everything into building a real asset ‚Äî the journey from $100K to $250K to $1M.',
    hook: "I've built a quarter-million dollar business and I've never paid myself a single dollar.",
    script: [
      { label: 'HOOK', type: 'hook', text: "I've built a quarter-million dollar business and I've never paid myself a single dollar." },
      { label: 'BODY 1', type: 'body', text: "Every dollar that comes in goes right back into the business. Editors, equipment, software, team. And people think I'm crazy for that." },
      { label: 'REHOOK', type: 'rehook', text: "But here's what nobody understands about this decision‚Äî" },
      { label: 'BODY 2', type: 'body', text: "When you pay yourself first, the business starves. When you feed the business first, it grows into something that can pay you forever. I'm not building a paycheck. I'm building an asset. There's a massive difference." },
      { label: 'BODY 3', type: 'body', text: "Year one I made $100K in revenue. Year two, $250K. This year I'm going for a million. And when that machine is built? That's when I eat. Not before." },
      { label: 'OUTRO', type: 'body', text: "If you're building something real, you already know ‚Äî short-term sacrifice, long-term freedom. That's the trade." }
    ],
    value: "Shows the real cost of entrepreneurship that nobody talks about. Makes the audience respect the grind and question whether they have the same discipline.",
    cta: "Would you do the same? Drop a comment üëá",
    caption: "I've built a $250K business and never paid myself a dollar.\n\nNot because I can't.\nBecause I'm building something bigger than a paycheck.\n\nYear 1: $100K revenue\nYear 2: $250K revenue\nYear 3: Going for $1M\n\nEvery dollar goes back in ‚Äî editors, team, systems, growth.\n\nShort-term sacrifice. Long-term freedom.\nThat's the trade.\n\nWould you do the same? üëá",
    hashtags: "#entrepreneurlife #businessowner #socialmediaagency #buildingabusiness #entrepreneurmindset #agencyowner #businessgrowth #hustleculture #sacrificeforgreatness #ceo",
    visuals: [
      { icon: 'üìù', text: 'Open with handwritten note card showing "$250K Revenue / $0 Salary" ‚Äî hold it up to camera for first 2 seconds' },
      { icon: 'üí∞', text: 'Text overlay showing revenue growth: $100K ‚Üí $250K ‚Üí $1M with upward arrow animation' },
      { icon: 'üéØ', text: 'Direct eye contact the entire time ‚Äî this is a personal confession, keep it intimate' },
      { icon: 'üéµ', text: 'Subtle motivational background music ‚Äî something cinematic, low volume' },
      { icon: '‚úÇÔ∏è', text: 'Quick cuts between points to keep pace up ‚Äî no long pauses' }
    ]
  },
  {
    id: 'b001-02', title: '2 Seconds to Hook', project: 'brandingwithshota',
    pillar: 'The System', duration: '50-70s', batch: '001', status: 'filmed',
    topic: 'Why most people lose viewers in the first 2 seconds and the exact framework to fix it ‚Äî the 2-job hook rule.',
    hook: "Your hook has 2 seconds to work. And I can tell you right now ‚Äî yours isn't working. Here's why.",
    script: [
      { label: 'HOOK', type: 'hook', text: "Your hook has 2 seconds to work. And I can tell you right now ‚Äî yours isn't working. Here's why." },
      { label: 'BODY 1', type: 'body', text: "Most people start their videos like this: 'Hey guys, so today I wanted to talk about...' ‚Äî that's 4 seconds of nothing. The viewer is already gone. They don't know you, they don't care about you yet, and you just wasted the only window you had to make them care." },
      { label: 'REHOOK', type: 'rehook', text: "There's a dead simple fix and it takes 5 seconds to learn‚Äî" },
      { label: 'BODY 2', type: 'body', text: "Every hook does TWO things at once: establishes context AND teases value. Both. In one sentence.\n\nWatch ‚Äî bad hook: 'Today I'm going to share some tips about growing on Instagram.'\n\nGood hook: 'I studied 1,000 viral reels and they all do this one thing.'\n\nSame topic. One tells you what's coming. The other makes you NEED to know what that one thing is." },
      { label: 'BODY 3', type: 'body', text: "Quick test for your hooks. Ask yourself 4 things:\nDoes the visual match what I'm saying?\nIs the value clear in the first sentence?\nIs it obvious what this video is about?\nDoes it open a question they NEED answered?\n\nIf you can't say yes to all four ‚Äî rewrite it." },
      { label: 'OUTRO', type: 'body', text: "Go look at your last 5 videos. Rewatch the first 2 seconds. You'll see exactly where you're losing people." }
    ],
    value: "Teaches a specific, actionable framework (the 2-job rule + 4-question test) that viewers can apply to their own content immediately. High save potential.",
    cta: "Drop your worst hook below and I'll rewrite it üëá",
    caption: "Your hook has 2 seconds. That's it.\n\nAnd most people waste it with \"Hey guys, so today I wanted to...\"\n\nEvery great hook does 2 things at once:\n‚úÖ Establishes context\n‚úÖ Teases value\n\nBad: \"Today I'm sharing tips about Instagram\"\nGood: \"I studied 1,000 viral reels and they all do this ONE thing\"\n\nSame topic. Completely different result.\n\n4-question hook test:\n1. Does the visual match what you're saying?\n2. Is the value clear in the first sentence?\n3. Is it obvious what the video is about?\n4. Does it open a question they NEED answered?\n\nDrop your worst hook below ‚Äî I'll rewrite it for free üëá",
    hashtags: "#contenttips #hookformula #socialmediatips #reelstips #contentcreator #instagramgrowth #scripttips #socialmediamarketing #contentcreation #viralreels",
    visuals: [
      { icon: '‚è±Ô∏è', text: 'Open with bold text overlay: "2 SECONDS" with a ticking timer graphic' },
      { icon: '‚ùå', text: 'When showing the bad hook ‚Äî act it out poorly, bored energy, maybe a red X overlay' },
      { icon: '‚úÖ', text: 'When showing the good hook ‚Äî shift energy up, green checkmark overlay' },
      { icon: 'üìã', text: 'Text overlay the 4-question checklist as you read each one ‚Äî keep them on screen' },
      { icon: '‚úÇÔ∏è', text: 'Split-screen or side-by-side for bad vs good hook comparison' }
    ]
  },
  {
    id: 'b001-03', title: 'The Math on Content', project: 'brandingwithshota',
    pillar: 'The Business Case', duration: '45-60s', batch: '001', status: 'filmed',
    topic: 'The ROI math that proves social media content is the best investment a service business can make ‚Äî using a med spa as the example.',
    hook: "How much is one new customer worth to your business? Because I'm about to show you math that'll change how you think about content.",
    script: [
      { label: 'HOOK', type: 'hook', text: "How much is one new customer worth to your business? Because I'm about to show you math that'll change how you think about content." },
      { label: 'BODY 1', type: 'body', text: "Let's say you're a med spa. Average treatment is $500. A client comes back 6 times a year. You get just 4 new clients from social media in a month. That's $12,000 from people who found you because of a 30-second video." },
      { label: 'REHOOK', type: 'rehook', text: "Now here's the part that breaks people's brains‚Äî" },
      { label: 'BODY 2', type: 'body', text: "The content doesn't go away. That reel you posted in February? It's still getting views in August. Still showing up in search. Still landing in someone's feed who needs a med spa RIGHT NOW. One piece of content can generate leads for months. Ads stop the second you stop paying." },
      { label: 'BODY 3', type: 'body', text: "You're not paying for content. You're building a sales machine that works while you sleep. One new client literally pays for months of content. Everything after that is profit." },
      { label: 'OUTRO', type: 'body', text: "If you're a service business and you're not posting ‚Äî you're leaving money on the table every single day." }
    ],
    value: "Makes the abstract concept of 'content marketing' concrete with real dollar amounts. Forces service business owners to see the opportunity cost of NOT posting.",
    cta: "What's one client worth to YOUR business? Comment üëá",
    caption: "Let's do some math.\n\nYou're a med spa. Avg treatment = $500.\nClient comes back 6x/year. You get 4 new clients from social media.\n\nThat's $12,000/month from a 30-second video.\n\nBut here's what really breaks people's brains:\n\nThat reel you posted in February? Still getting views in August. Still showing up in search. Still landing in feeds.\n\nContent compounds. Ads die the second you stop paying.\n\nOne new client pays for months of content.\nEverything after that? Pure profit.\n\nIf you're a service business not posting ‚Äî you're leaving money on the table every single day.\n\nWhat's one client worth to YOUR business? üëá",
    hashtags: "#servicebusiness #socialmediaROI #contentmarketing #smallbusinesstips #landscaping #businessmath #socialmediaagency #marketingtips #leadgeneration #digitalmarketing",
    visuals: [
      { icon: 'üî¢', text: 'Animated number overlays: $500 ‚Üí √ó6 ‚Üí √ó4 ‚Üí $12,000 ‚Äî make the math visual and satisfying' },
      { icon: 'üìÖ', text: 'Calendar graphic showing Feb ‚Üí Aug with a reel icon still generating views' },
      { icon: 'üìä', text: 'Side-by-side comparison: Content (line going up over time) vs Ads (line dropping to zero)' },
      { icon: 'üíµ', text: 'Text overlay: "1 new client = months of content PAID FOR" at the key moment' },
      { icon: 'üéØ', text: 'Confident, direct energy ‚Äî you\'re dropping knowledge, not selling. Let the math do the convincing.' }
    ]
  },
  {
    id: 'b001-04', title: 'Fire Your ChatGPT Agency', project: 'brandingwithshota',
    pillar: 'Hot Takes', duration: '50-65s', batch: '001', status: 'filmed',
    topic: 'Calling out lazy agencies that use ChatGPT for 100% of their scripting ‚Äî and why that produces generic, forgettable content.',
    hook: "If your social media agency is using ChatGPT to write all your scripts ‚Äî fire them. Today.",
    script: [
      { label: 'HOOK', type: 'hook', text: "If your social media agency is using ChatGPT to write all your scripts ‚Äî fire them. Today." },
      { label: 'BODY 1', type: 'body', text: "I've seen it over and over. Agency charges $3-5K a month, and behind the scenes? They're copy-pasting your brief into ChatGPT, slapping it on a graphic, and calling it strategy. And you're wondering why your content sounds exactly like everyone else's." },
      { label: 'REHOOK', type: 'rehook', text: "Here's the thing nobody in this industry wants to admit‚Äî" },
      { label: 'BODY 2', type: 'body', text: "ChatGPT doesn't know your customers. It doesn't know what makes them stop scrolling. It doesn't know the inside jokes in your industry, the objections your clients have, or the specific thing that makes YOUR business different. It writes generic content because it IS generic." },
      { label: 'BODY 3', type: 'body', text: "A real content team does research. They study your competitors, find what's actually working in your space, pull the patterns, and THEN write scripts with YOUR voice, YOUR stories, YOUR expertise. AI is a tool, not a replacement for thinking." },
      { label: 'OUTRO', type: 'body', text: "If you can't tell the difference between your content and everyone else's in your industry ‚Äî that's your sign." }
    ],
    value: "Validates the frustration business owners feel when their agency produces mediocre content. Positions CMP as the agency that actually does the work.",
    cta: "Has this happened to you? Tell me üëá",
    caption: "If your social media agency uses ChatGPT for ALL your scripts ‚Äî fire them.\n\nI've seen it over and over:\n‚Üí Agency charges $3-5K/month\n‚Üí Copy-pastes your brief into ChatGPT\n‚Üí Slaps it on a graphic\n‚Üí Calls it \"strategy\"\n\nWonder why your content sounds like everyone else's?\n\nChatGPT doesn't know:\n‚ùå Your customers\n‚ùå What makes them stop scrolling\n‚ùå Your industry's inside jokes\n‚ùå The objections your clients have\n‚ùå What makes YOUR business different\n\nA real content team does research first.\nStudies competitors. Finds what works. Pulls patterns.\nTHEN writes scripts in YOUR voice.\n\nAI is a tool, not a replacement for thinking.\n\nHas this happened to you? üëá",
    hashtags: "#socialmediaagency #marketingagency #chatgpt #contentcreation #socialmediatips #agencylife #hotake #businessowner #contentmarketing #digitalmarketing",
    visuals: [
      { icon: 'üò§', text: 'Slightly frustrated/passionate energy ‚Äî not angry, but convicted. Like you\'re telling a friend the truth.' },
      { icon: 'üì±', text: 'Quick cut showing a generic ChatGPT interface when mentioning "copy-pasting into ChatGPT"' },
      { icon: 'üî¥', text: 'Red emphasis text on key phrases: "fire them," "generic content," "replacement for thinking"' },
      { icon: '‚úÖ', text: 'Green text when describing what a real team does ‚Äî visual contrast between bad and good' },
      { icon: 'üéØ', text: 'End with direct eye contact and pause after "that\'s your sign" ‚Äî let it land' }
    ]
  },
  {
    id: 'b001-05', title: 'Script This: Plumber', project: 'brandingwithshota',
    pillar: 'Signature Series', duration: '55-75s', batch: '001', status: 'filmed',
    topic: 'Live demonstration of writing a viral script for a "boring" business (plumber) in under 60 seconds ‚Äî proving any business can make great content.',
    hook: "Someone told me plumbing is the most boring business to make content for. So I wrote a viral script for a plumber in 60 seconds. Watch this.",
    script: [
      { label: 'HOOK', type: 'hook', text: "Someone told me plumbing is the most boring business to make content for. So I wrote a viral script for a plumber in 60 seconds. Watch this." },
      { label: 'BODY 1', type: 'body', text: "First ‚Äî what does a plumber's ideal customer care about? They don't care about pipe fittings. They care about their basement flooding at 2 AM and nobody picking up the phone. That's the emotion we're scripting to." },
      { label: 'REHOOK', type: 'rehook', text: "So here's the script‚Äî" },
      { label: 'BODY 2 (THE SCRIPT)', type: 'body', text: "Hook: 'Your house is slowly flooding and you don't even know it yet.'\n\nBody: 'See this pipe? Looks fine, right? But behind your wall, there's a slow leak that's been dripping for months. By the time you notice, you're looking at $10,000 in water damage. Here's the one thing you can check right now that takes 30 seconds‚Äî'\n\nAnd then you show them how to check. Free value. They save it. They share it with their spouse. They follow you because now you're the plumber who saved them $10K." },
      { label: 'BODY 3', type: 'body', text: "That took me less than a minute to write. The secret? I didn't start with plumbing. I started with the fear. Every business has a version of this. Find the fear, write to it." },
      { label: 'OUTRO', type: 'body', text: "Drop the most boring business you can think of in the comments. I'll script it." }
    ],
    value: "Proves expertise in real-time by doing the thing live. Creates an interactive loop where viewers comment boring businesses and Shota scripts them ‚Äî unlimited content ideas.",
    cta: "Drop the most boring business you can think of in the comments. I'll script it. üëá",
    caption: "\"Plumbing is too boring for content.\"\n\nChallenge accepted. I wrote a viral script in 60 seconds.\n\nStep 1: What does the customer ACTUALLY care about?\n‚Üí Not pipe fittings\n‚Üí Their basement flooding at 2 AM\n\nStep 2: Script to the fear.\n\nHook: \"Your house is slowly flooding and you don't even know it yet.\"\n\nThat one line makes someone stop scrolling.\n\nThen give them free value ‚Äî show them what to check.\nThey save it. Share it. Follow you.\n\nThe secret: Don't start with the business.\nStart with the fear. Every business has one.\n\nDrop the most boring business you can think of üëá I'll script it.",
    hashtags: "#contentcreation #scripttips #socialmediatips #plumber #boringbusiness #viralcontent #contentcreator #reelsscript #socialmediamarketing #contentideas",
    visuals: [
      { icon: '‚è±Ô∏è', text: 'On-screen timer counting up from 0:00 while you write/deliver the script ‚Äî adds urgency and proves the "60 seconds" claim' },
      { icon: 'üìù', text: 'Whiteboard or notepad visible where you jot down "FEAR: basement flooding at 2AM" ‚Äî show the process' },
      { icon: 'üé≠', text: 'Shift your energy when delivering the plumber script ‚Äî act it out like you\'re the plumber filming it. Voice change, intensity up.' },
      { icon: 'üî•', text: 'Text overlay: "THE SECRET: Start with the fear" when you reveal the lesson' },
      { icon: 'üòÑ', text: 'Playful, slightly cocky energy throughout ‚Äî you\'re showing off a skill and having fun with it' }
    ]
  },
  {
    id: 'b002-06', title: 'Script This: Med Spa', project: 'brandingwithshota',
    pillar: 'Signature Series', duration: '55-75s', batch: '002', status: 'new',
    topic: 'Live-scripting a med spa video that addresses the real fear: looking fake. Shows how to sell the relief, not the treatment.',
    hook: "Med spas spend $5,000 a month on ads. I'm about to write them a script for free that'll outperform all of it.",
    sections: [
      { label: 'HOOK', type: 'hook', text: "Med spas spend $5,000 a month on ads. I'm about to write them a script for free that'll outperform all of it." },
      { label: 'BODY 1', type: 'body', text: "Here's what every med spa gets wrong with their content. They post before-and-afters with zero context. No story, no emotion, just a side-by-side pic and 'book now.' That doesn't make anyone feel anything." },
      { label: 'REHOOK', type: 'rehook', text: "Here's what actually works‚Äî" },
      { label: 'BODY 2 (THE SCRIPT)', type: 'body', text: "Hook: 'She almost canceled her appointment because she was terrified of looking fake.'\n\nBody: 'This is Sarah. She wanted Botox for a year but kept scrolling horror stories online. Frozen faces. People who don't look like themselves anymore. So she almost didn't come in. But here's what we told her ‚Äî good Botox doesn't make you look different. It makes you look like you slept 8 hours. Watch her reaction seeing herself for the first time.'\n\nThen you show the reveal. That's it. That's the whole video." },
      { label: 'BODY 3', type: 'body', text: "You're not selling Botox. You're selling the relief that it won't ruin your face. Every med spa client has that fear. Address the fear, show the outcome, let the emotion do the selling." },
      { label: 'OUTRO', type: 'body', text: "If you run a med spa and your content isn't doing this ‚Äî your content isn't working. Drop your business in the comments, I'll tell you what to post." }
    ],
    value: "Shows med spa owners the psychology behind their clients' buying decisions. Positions CMP as experts who understand the emotional triggers, not just the aesthetics.",
    cta: "What treatment would YOU want to see scripted? üëá",
    caption: "Med spas spend $5K/month on ads.\nI wrote a better script for free.\n\nThe mistake: posting before & afters with zero context.\nNo story. No emotion. Just \"book now.\"\n\nThe fix: script to the FEAR.\n\nEvery Botox client's fear? Looking fake.\nFrozen face. Not looking like themselves.\n\nSo the hook isn't about Botox.\nIt's about relief.\n\n\"She almost canceled because she was terrified of looking fake.\"\n\nThat one line does more than a $5K ad budget.\n\nAddress the fear ‚Üí show the outcome ‚Üí let emotion sell.\n\nIf you run a med spa, drop your business below üëá",
    hashtags: "#medspa #medspmarketing #botox #socialmediamarketing #contentcreation #scripttips #medspaowner #aesthetics #viralcontent #reelsscript",
    visuals: [
      { icon: 'üíâ', text: 'Show a quick montage of generic med spa content (before/afters with no context) as the "what they get wrong" example' },
      { icon: 'üé≠', text: 'When delivering the med spa script, shift to warmer, storytelling energy ‚Äî like you\'re narrating a documentary' },
      { icon: 'üò∞', text: 'Text overlay: "THE FEAR: Looking fake" when you reveal the psychology' },
      { icon: 'üí°', text: 'Text overlay: "Good Botox = you look like you slept 8 hours" ‚Äî quotable moment' }
    ]
  },
  {
    id: 'b002-07', title: 'Script This: Attorney', project: 'brandingwithshota',
    pillar: 'Signature Series', duration: '55-75s', batch: '002', status: 'new',
    topic: 'Live-scripting a personal injury attorney video that exposes insurance company tactics. Trust-building over selling.',
    hook: "Lawyers think they can't go viral. I wrote a personal injury attorney a script in under a minute that would get more leads than a billboard.",
    sections: [
      { label: 'HOOK', type: 'hook', text: "Lawyers think they can't go viral. I wrote a personal injury attorney a script in under a minute that would get more leads than a billboard." },
      { label: 'BODY 1', type: 'body', text: "Every PI attorney's content is the same. Guy in a suit pointing at text on screen: 'Were you injured in a car accident? Call us today.' Nobody stops for that. You know why? Because it sounds like every other lawyer. And people don't trust lawyers ‚Äî that's the real problem you need to solve first." },
      { label: 'REHOOK', type: 'rehook', text: "So here's the script‚Äî" },
      { label: 'BODY 2 (THE SCRIPT)', type: 'body', text: "Hook: 'The insurance company is hoping you don't watch this video.'\n\nBody: 'If you just got in a car accident, the insurance adjuster is going to call you within 48 hours. They're going to sound really nice. They're going to ask how you're feeling. And then they're going to offer you a check. Do NOT take it. That first offer? It's designed to be as low as possible before you realize how bad your injuries actually are. Here's exactly what to say when they call‚Äî'\n\nThen you give them the script. Word for word. Free." },
      { label: 'BODY 3', type: 'body', text: "You're not saying 'hire me.' You're giving them something they desperately need in a moment of panic. That builds more trust than any billboard ever could. And when they DO need a lawyer? You're the one who helped them when nobody else did." },
      { label: 'OUTRO', type: 'body', text: "If you're an attorney and your content is just you pointing at text ‚Äî we need to talk. Drop your practice area below and I'll script it." }
    ],
    value: "Exposes insurance company tactics (high shock value), positions attorneys as helpers not salespeople, and demonstrates CMP can make even 'boring' industries compelling.",
    cta: "What type of lawyer should I script next? ‚öñÔ∏èüëá",
    caption: "Lawyers think they can't go viral.\n\nI wrote a PI attorney a script in under a minute.\n\nThe problem: every lawyer's content is identical.\nGuy in suit. Text on screen. \"Call us today.\"\n\nNobody stops for that.\n\nThe fix: stop selling, start helping.\n\nHook: \"The insurance company is hoping you don't watch this video.\"\n\nThen tell them:\n‚Üí The adjuster WILL call within 48 hours\n‚Üí They'll sound really nice\n‚Üí They'll offer you a check\n‚Üí Do NOT take it\n‚Üí Here's exactly what to say instead\n\nFree value in a moment of panic.\nThat builds more trust than any billboard.\n\nDrop your practice area üëá I'll script it.",
    hashtags: "#attorney #personalinjury #lawyermarketing #socialmediamarketing #contentcreation #scripttips #lawyersoftiktok #legalmarketing #viralcontent #reelsscript",
    visuals: [
      { icon: '‚öñÔ∏è', text: 'Quick montage of generic lawyer content (guy pointing at text) as the "bad example"' },
      { icon: 'üö®', text: 'When delivering the script, increase urgency ‚Äî lean in, lower voice slightly for "Do NOT take it"' },
      { icon: 'üìû', text: 'Text overlay: "48 HOURS" when mentioning the insurance call timeline' },
      { icon: 'üî•', text: 'Text overlay: "Trust > Billboards" as the closing principle' }
    ]
  },
  {
    id: 'b002-08', title: 'The Script Template', project: 'brandingwithshota',
    pillar: 'The System', duration: '60-80s', batch: '002', status: 'new',
    topic: 'Giving away CMP\'s fill-in-the-blank script template that any business can use. Highest save potential of any content piece.',
    hook: "I'm about to give you the exact script template I use for every single client. Screenshot this.",
    sections: [
      { label: 'HOOK', type: 'hook', text: "I'm about to give you the exact script template I use for every single client. Screenshot this." },
      { label: 'BODY 1', type: 'body', text: "Every viral business video follows the same structure. It doesn't matter if you're a dentist, a roofer, or a fitness coach. The framework is the same. And most people overcomplicate it." },
      { label: 'REHOOK', type: 'rehook', text: "Here's the template. Ready?" },
      { label: 'BODY 2 (THE TEMPLATE)', type: 'body', text: "Line one ‚Äî the hook:\n'[Your customer's biggest fear] is costing you [dollar amount or consequence].'\n\nLine two ‚Äî the problem:\n'Most [type of business] try to fix this by [common wrong approach]. But that actually makes it worse because [reason].'\n\nLine three ‚Äî the solution:\n'Here's what actually works: [your unique approach in one sentence].'\n\nLine four ‚Äî the proof:\n'We did this for [client type] and [specific result with a number].'\n\nLine five ‚Äî the CTA:\n'If you want the same thing, [simple next step].'\n\nThat's it. Five lines. Fill in the blanks. You have a script." },
      { label: 'BODY 3', type: 'body', text: "This template works because it follows how people actually make decisions. Fear, problem, solution, proof, action. In that order. Don't rearrange it. Don't add fluff. Just fill in the blanks and hit record." },
      { label: 'OUTRO', type: 'body', text: "Save this. Use it. If it works ‚Äî and it will ‚Äî come back and tell me." }
    ],
    value: "The highest-value giveaway in the entire content library. People who use it and get results become CMP evangelists. People who see it and realize they can't execute it become CMP clients.",
    cta: "Save üîñ + tag someone who needs this",
    caption: "The exact script template I use for every client.\nScreenshot this. Use it. No strings.\n\n5 lines. Fill in the blanks. Hit record.\n\n1Ô∏è‚É£ THE HOOK:\n\"[Customer's biggest fear] is costing you [consequence]\"\n\n2Ô∏è‚É£ THE PROBLEM:\n\"Most [businesses] try [wrong approach]. It makes it worse because [reason]\"\n\n3Ô∏è‚É£ THE SOLUTION:\n\"Here's what works: [your approach in one sentence]\"\n\n4Ô∏è‚É£ THE PROOF:\n\"We did this for [client] and [result with a number]\"\n\n5Ô∏è‚É£ THE CTA:\n\"If you want the same, [simple next step]\"\n\nWhy it works: Fear ‚Üí Problem ‚Üí Solution ‚Üí Proof ‚Üí Action.\nThat's how people actually make decisions.\n\nDon't rearrange it. Don't add fluff.\nJust fill it in and post.\n\nSave üîñ + tag someone who needs this",
    hashtags: "#scripttemplate #contentcreation #socialmediatips #scriptwriting #contentcreator #businesstips #socialmediamarketing #freetemplate #reelsscript #viralcontent",
    visuals: [
      { icon: 'üìù', text: 'CRITICAL: Each template line MUST appear as text overlay on screen as you say it. This is the most visual script in the batch.' },
      { icon: 'üñºÔ∏è', text: 'Consider split-screen: you talking on left, template building on right' },
      { icon: 'üí°', text: 'Text overlay: "Fear ‚Üí Problem ‚Üí Solution ‚Üí Proof ‚Üí Action" as the final framework summary' },
      { icon: 'üîñ', text: 'End with a "SAVE THIS" animation or text pulse' }
    ]
  },
  {
    id: 'b002-09', title: 'Why Your Content Feels Off', project: 'brandingwithshota',
    pillar: 'The System', duration: '45-60s', batch: '002', status: 'new',
    topic: 'Diagnosing why business owners get views but no leads. The shift from "content about you" to "content about their fear."',
    hook: "You're posting consistently, getting decent views, but no one's reaching out. Here's why.",
    sections: [
      { label: 'HOOK', type: 'hook', text: "You're posting consistently, getting decent views, but no one's reaching out. Here's why." },
      { label: 'BODY 1', type: 'body', text: "Your content is entertaining but it doesn't position you as the solution to a problem. You've got attention but no direction. People watch, they like, they move on. They never think 'I should hire this person.'" },
      { label: 'REHOOK', type: 'rehook', text: "And it comes down to one missing piece‚Äî" },
      { label: 'BODY 2', type: 'body', text: "Every piece of content needs to answer one question for the viewer: 'What do I do next?' Not with a 'link in bio' or 'DM me.' With value so specific that they think 'this person clearly knows my problem better than I do.'\n\nWhen a roofer posts 'We do great roofs!' that's nice. When a roofer posts 'Your roof is leaking in a spot you can't see ‚Äî here's how to check in 30 seconds' ‚Äî now they're the expert. Now there's a reason to call THEM." },
      { label: 'BODY 3', type: 'body', text: "Stop making content about what you do. Start making content about what your customer is afraid of. That's the shift." },
      { label: 'OUTRO', type: 'body', text: "If you're posting and not getting leads ‚Äî the content isn't broken. The strategy is." }
    ],
    value: "Diagnoses the exact frustration every business owner posting content feels. Positions CMP as the strategic fix, not just a content mill.",
    cta: "What's your business? I'll tell you what to post üëá",
    caption: "Posting consistently but no one's reaching out?\n\nYour content isn't broken. Your strategy is.\n\nThe problem: you're making content about what YOU do.\nNot about what your CUSTOMER fears.\n\n\"We do great roofs!\" ‚Üí nobody calls\n\"Your roof is leaking somewhere you can't see\" ‚Üí phone rings\n\nSame business. Different approach.\n\nEvery post should answer ONE question:\n\"What do I do next?\"\n\nNot \"link in bio.\" Not \"DM me.\"\nValue so specific they think:\n\"This person knows my problem better than I do.\"\n\nThat's when they hire you.\n\nWhat's your business? I'll tell you what to post üëá",
    hashtags: "#contentmarketing #socialmediatips #businesscontent #leadgeneration #socialmediamarketing #contentcreation #businesstips #contentstrategy #smallbusiness #digitalmarketing",
    visuals: [
      { icon: 'üìä', text: 'Quick graphic showing: Views ‚úÖ Likes ‚úÖ Leads ‚ùå ‚Äî visual representation of the problem' },
      { icon: 'üè†', text: 'Side-by-side text overlay: "We do great roofs" vs "Your roof is leaking somewhere you can\'t see"' },
      { icon: 'üîë', text: 'Text overlay: "Content about YOU ‚Üí Content about THEIR FEAR"' },
      { icon: 'üéØ', text: 'Calm, consulting energy ‚Äî you\'re a doctor diagnosing their problem' }
    ]
  },
  {
    id: 'b002-10', title: "I'll Script Your Business in 60 Seconds", project: 'brandingwithshota',
    pillar: 'Signature Series', duration: '60-80s', batch: '002', status: 'new',
    topic: 'Interactive challenge: comment your business, Shota scripts it live. Drives massive comment engagement and creates infinite content ideas.',
    hook: "Comment your business and I'll write you a viral script in 60 seconds. Let's go.",
    sections: [
      { label: 'HOOK', type: 'hook', text: "Comment your business and I'll write you a viral script in 60 seconds. Let's go." },
      { label: 'BODY 1', type: 'body', text: "Alright ‚Äî someone said they're a personal trainer. Let's go.\n\nMost fitness content is 'here's a workout.' Cool. Everyone does that. Nobody hires a trainer because of a workout video. They hire because they're STUCK." },
      { label: 'REHOOK', type: 'rehook', text: "Here's the script‚Äî" },
      { label: 'BODY 2 (THE SCRIPT)', type: 'body', text: "Hook: 'You've been working out for 6 months and you look exactly the same. Here's what's actually wrong.'\n\nBody: 'It's not your effort. You're showing up, you're sweating, you're sore the next day. The problem is your program has no structure. You're doing random workouts from Instagram and expecting a specific result. That's like driving without a GPS and wondering why you're lost. Here's the 3 things you need to fix this week‚Äî'\n\nThen you give three specific, actionable tips. Not generic. Specific." },
      { label: 'BODY 3', type: 'body', text: "See what I did? I didn't start with the solution. I started with the frustration. Because that's what makes someone stop scrolling. They see their own problem reflected back at them. THEN they're ready to hear the answer." },
      { label: 'OUTRO', type: 'body', text: "Drop your business in the comments. I'll script the next one live." }
    ],
    value: "The ultimate engagement play. Every comment is a potential client lead AND a content idea. Creates a self-perpetuating cycle: more comments ‚Üí more episodes ‚Üí more comments.",
    cta: "Drop your business üëá I'll script it",
    caption: "Comment your business.\nI'll write you a viral script in 60 seconds.\n\nFirst up: Personal Trainer.\n\nMost fitness content = \"here's a workout.\"\nCool. Everyone does that.\nNobody hires a trainer from a workout video.\n\nThey hire because they're STUCK.\n\nHook: \"You've been working out for 6 months and look exactly the same.\"\n\nThat one line hits because it's their exact frustration.\n\nThe rule: Don't start with the solution.\nStart with the frustration.\n\nThat's what makes someone stop scrolling.\nThey see their own problem ‚Üí THEN they want the answer.\n\nDrop your business in the comments üëá\nI'll script the next one.",
    hashtags: "#scripttips #contentcreation #socialmediamarketing #viralscript #businesstips #contentcreator #reelsscript #marketingtips #socialmediastrategy #60secondscript",
    visuals: [
      { icon: '‚è±Ô∏è', text: 'On-screen timer counting up ‚Äî same energy as Plumber episode, proves the speed claim' },
      { icon: 'üí¨', text: 'Show the "comment" on screen as if reading it live (even if staged for first episode)' },
      { icon: 'üèãÔ∏è', text: 'Quick visual of generic workout content as the "what everyone does" example' },
      { icon: 'üß†', text: 'Text overlay: "Start with FRUSTRATION, not SOLUTION"' },
      { icon: '‚ö°', text: 'Fastest energy of all scripts ‚Äî this should feel spontaneous and exciting' }
    ]
  }
];

let scripts = [];
let currentFilter = 'all';
let draggedId = null;
let touchClone = null;
let touchStartX = 0, touchStartY = 0;
let touchDragging = false;

function loadState() {
  try {
    const saved = localStorage.getItem(STORAGE_KEY);
    if (saved) {
      const parsed = JSON.parse(saved);
      const savedMap = {};
      parsed.scripts.forEach(s => savedMap[s.id] = s);
      scripts = DEFAULT_SCRIPTS.map(d => {
        const s = savedMap[d.id];
        return s ? { ...d, status: s.status, archivedAt: s.archivedAt || null } : { ...d };
      });
      parsed.scripts.forEach(s => { if (!scripts.find(x => x.id === s.id)) scripts.push(s); });
    } else {
      scripts = [...DEFAULT_SCRIPTS];
    }
  } catch(e) { scripts = [...DEFAULT_SCRIPTS]; }
}

function saveState() {
  localStorage.setItem(STORAGE_KEY, JSON.stringify({ scripts: scripts.map(s => ({ id: s.id, status: s.status, archivedAt: s.archivedAt || null })), lastUpdated: new Date().toISOString() }));
  const el = document.getElementById('saveIndicator');
  el.classList.add('show');
  setTimeout(() => el.classList.remove('show'), 1500);
}

function filterProject(project, btn) {
  currentFilter = project;
  document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  render();
}

function openModal(id) {
  const s = scripts.find(x => x.id === id);
  if (!s) return;
  const tag = PILLAR_TAGS[s.pillar] || { cls: 'tag-system', icon: 'üìå' };
  const modal = document.getElementById('modal');

  const scriptBlocks = s.sections || s.script || [];
  const scriptHTML = scriptBlocks.map(block => `
    <div class="script-block ${block.type === 'rehook' ? 'rehook' : ''}">
      <div class="script-label">${block.label}</div>
      <div class="script-text">${block.text.replace(/\n/g, '<br>')}</div>
    </div>
  `).join('');

  const visualsHTML = s.visuals.map(v => `
    <div class="visual-item">
      <div class="visual-icon">${v.icon}</div>
      <div class="visual-text">${v.text}</div>
    </div>
  `).join('');

  modal.innerHTML = `
    <button class="modal-close" onclick="closeModal()">‚úï</button>
    <div class="modal-title">${s.title}</div>
    <div class="modal-pillar"><span class="tag ${tag.cls}">${tag.icon} ${s.pillar}</span></div>
    <div class="modal-meta">
      <div class="meta-chip">‚è±Ô∏è <strong>${s.duration}</strong></div>
      <div class="meta-chip">üì¶ Batch <strong>${s.batch}</strong></div>
      <div class="meta-chip">üìÇ <strong>@${s.project}</strong></div>
    </div>

    <div class="modal-section">
      <div class="modal-section-title">üìå Topic</div>
      <div class="modal-section-content">${s.topic}</div>
    </div>

    <div class="modal-section">
      <div class="modal-section-title">üé¨ Full Script <button class="copy-btn" onclick="copyScript('${s.id}')">üìã Copy for Teleprompter</button> <button class="archive-btn" onclick="if(confirm('Archive this script? You can restore it anytime from the Archive tab.')) archiveScript('${s.id}')">üóÉÔ∏è Archive</button></div>
      <div id="script-${s.id}">${scriptHTML}</div>
    </div>

    <div class="modal-section">
      <div class="modal-section-title">üíé Value Proposition</div>
      <div class="modal-section-content">${s.value}</div>
    </div>

    <div class="modal-section">
      <div class="modal-section-title">üì£ Call to Action</div>
      <div class="modal-section-content" style="color:#818cf8;font-weight:600;">${s.cta}</div>
    </div>

    <div class="modal-section">
      <div class="modal-section-title">üì± Instagram Caption <button class="copy-btn" onclick="copyText(this, 'caption-${s.id}')">Copy</button></div>
      <div class="caption-box" id="caption-${s.id}">${s.caption}</div>
    </div>

    <div class="modal-section">
      <div class="modal-section-title"># Hashtags <button class="copy-btn" onclick="copyText(this, 'tags-${s.id}')">Copy</button></div>
      <div class="hashtags" id="tags-${s.id}">${s.hashtags}</div>
    </div>

    <div class="modal-section">
      <div class="modal-section-title">üé® Visual Hooks & Production Notes</div>
      ${visualsHTML}
    </div>
  `;

  document.getElementById('modalOverlay').classList.add('open');
  document.body.style.overflow = 'hidden';
}

function closeModal() {
  document.getElementById('modalOverlay').classList.remove('open');
  document.body.style.overflow = '';
}

function copyScript(scriptId) {
  const s = scripts.find(x => x.id === scriptId);
  if (!s) return;
  const plainText = (s.sections || s.script || []).map(block => block.text).join('\n\n');
  const btn = event.target;
  navigator.clipboard.writeText(plainText).then(() => {
    btn.textContent = '‚úÖ Copied!';
    btn.classList.add('copied');
    setTimeout(() => { btn.textContent = 'üìã Copy for Teleprompter'; btn.classList.remove('copied'); }, 2000);
  });
}

function copyText(btn, elId) {
  const text = document.getElementById(elId).innerText;
  navigator.clipboard.writeText(text).then(() => {
    btn.textContent = 'Copied!';
    btn.classList.add('copied');
    setTimeout(() => { btn.textContent = 'Copy'; btn.classList.remove('copied'); }, 2000);
  });
}

document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });

function moveScript(id, newStatus) {
  const s = scripts.find(x => x.id === id);
  if (s && s.status !== newStatus) { s.status = newStatus; saveState(); render(); }
}

function createCard(script) {
  const tag = PILLAR_TAGS[script.pillar] || { cls: 'tag-system', icon: 'üìå' };
  const card = document.createElement('div');
  card.className = 'card';
  card.draggable = true;
  card.dataset.id = script.id;
  card.innerHTML = `
    <div class="card-title">${script.title}</div>
    <div class="card-meta"><span class="tag ${tag.cls}">${tag.icon} ${script.pillar}</span></div>
    <div class="card-hook">"${script.hook}"</div>
    <div class="card-details"><span>${script.duration}</span><span class="card-expand" data-id="${script.id}">View Script ‚Üí</span></div>
  `;

  // Click to open modal (but not during drag)
  let didDrag = false;
  card.addEventListener('mousedown', () => { didDrag = false; });
  card.addEventListener('mousemove', () => { didDrag = true; });
  card.addEventListener('click', (e) => {
    if (!didDrag && (e.target.classList.contains('card-expand') || e.target.closest('.card-expand'))) {
      openModal(script.id);
    }
  });
  // Also open on tap for the expand button
  card.querySelector('.card-expand').addEventListener('touchend', (e) => {
    if (!touchDragging) { e.preventDefault(); openModal(script.id); }
  });

  // Desktop drag
  card.addEventListener('dragstart', (e) => {
    draggedId = script.id;
    card.classList.add('dragging');
    e.dataTransfer.effectAllowed = 'move';
    e.dataTransfer.setData('text/plain', script.id);
  });
  card.addEventListener('dragend', () => {
    card.classList.remove('dragging');
    draggedId = null;
    document.querySelectorAll('.column').forEach(c => c.classList.remove('drag-over'));
  });

  // Touch drag
  card.addEventListener('touchstart', (e) => {
    const touch = e.touches[0];
    touchStartX = touch.clientX;
    touchStartY = touch.clientY;
    draggedId = script.id;
    touchDragging = false;
  }, { passive: true });

  card.addEventListener('touchmove', (e) => {
    const touch = e.touches[0];
    const dx = Math.abs(touch.clientX - touchStartX);
    const dy = Math.abs(touch.clientY - touchStartY);
    if (!touchDragging && (dx > 10 || dy > 10)) {
      touchDragging = true;
      card.classList.add('dragging');
      touchClone = card.cloneNode(true);
      touchClone.style.cssText = `position:fixed;width:${card.offsetWidth}px;pointer-events:none;z-index:999;opacity:0.85;transform:rotate(2deg) scale(1.03);`;
      document.body.appendChild(touchClone);
    }
    if (touchDragging) {
      e.preventDefault();
      touchClone.style.left = (touch.clientX - card.offsetWidth/2) + 'px';
      touchClone.style.top = (touch.clientY - 30) + 'px';
      document.querySelectorAll('.column').forEach(col => {
        const r = col.getBoundingClientRect();
        col.classList.toggle('drag-over', touch.clientX >= r.left && touch.clientX <= r.right && touch.clientY >= r.top && touch.clientY <= r.bottom);
      });
    }
  }, { passive: false });

  card.addEventListener('touchend', (e) => {
    if (touchDragging && draggedId) {
      const touch = e.changedTouches[0];
      document.querySelectorAll('.column').forEach(col => {
        const r = col.getBoundingClientRect();
        if (touch.clientX >= r.left && touch.clientX <= r.right && touch.clientY >= r.top && touch.clientY <= r.bottom) {
          moveScript(draggedId, col.dataset.status);
        }
        col.classList.remove('drag-over');
      });
    }
    if (touchClone) { touchClone.remove(); touchClone = null; }
    card.classList.remove('dragging');
    setTimeout(() => { touchDragging = false; }, 50);
    draggedId = null;
  });

  return card;
}

function render() {
  const board = document.getElementById('board');
  board.innerHTML = '';
  const filtered = (currentFilter === 'all' ? scripts : scripts.filter(s => s.project === currentFilter)).filter(s => s.status !== 'archived');

  COLUMNS.forEach(col => {
    const colEl = document.createElement('div');
    colEl.className = `column ${col.cls}`;
    colEl.dataset.status = col.id;
    const colScripts = filtered.filter(s => s.status === col.id);
    colEl.innerHTML = `<div class="column-header"><h2>${col.label}</h2><span class="count">${colScripts.length}</span></div>`;
    const cardsContainer = document.createElement('div');
    cardsContainer.className = 'cards';
    if (colScripts.length === 0) cardsContainer.innerHTML = '<div class="empty">Drag scripts here</div>';
    else colScripts.forEach(s => cardsContainer.appendChild(createCard(s)));
    colEl.appendChild(cardsContainer);

    colEl.addEventListener('dragover', (e) => { e.preventDefault(); e.dataTransfer.dropEffect = 'move'; colEl.classList.add('drag-over'); });
    colEl.addEventListener('dragleave', () => colEl.classList.remove('drag-over'));
    colEl.addEventListener('drop', (e) => {
      e.preventDefault(); colEl.classList.remove('drag-over');
      const id = e.dataTransfer.getData('text/plain');
      if (id) moveScript(id, col.id);
    });
    board.appendChild(colEl);
  });

  COLUMNS.forEach(col => {
    const el = document.getElementById('stat-' + col.id);
    if (el) el.textContent = filtered.filter(s => s.status === col.id).length;
  });
  document.getElementById('updatedText').textContent = 'Last updated: ' + new Date().toLocaleString();
}

// === CALENDAR VIEW ===
const SCHEDULE_KEY = 'cmp-content-schedule';

function getSchedule() {
  const saved = localStorage.getItem(SCHEDULE_KEY);
  if (saved) {
    const parsed = JSON.parse(saved);
    // Merge any new scripts not yet in schedule
    const scheduledIds = new Set(parsed.map(e => e.scriptId));
    const unscheduled = scripts.filter(s => !scheduledIds.has(s.id) && s.status !== 'archived');
    if (unscheduled.length > 0) {
      // Find the last date in the schedule
      let lastDate = new Date();
      parsed.forEach(e => {
        const d = new Date(e.date);
        if (d > lastDate) lastDate = d;
      });
      let dayOffset = 1;
      unscheduled.forEach(s => {
        const d1 = new Date(lastDate); d1.setDate(d1.getDate() + dayOffset);
        parsed.push({ scriptId: s.id, date: d1.toISOString().split('T')[0], type: 'reel' });
        const d2 = new Date(lastDate); d2.setDate(d2.getDate() + dayOffset + 1);
        parsed.push({ scriptId: s.id, date: d2.toISOString().split('T')[0], type: 'carousel' });
        dayOffset += 2;
      });
      localStorage.setItem(SCHEDULE_KEY, JSON.stringify(parsed));
    }
    return parsed;
  }
  // Build fresh schedule: batch 001 recommended order, then batch 002, reel+carousel per script, 2 days apart
  const today = new Date();
  today.setHours(0,0,0,0);
  const b001order = ['b001-01','b001-04','b001-03','b001-02','b001-05'];
  const b002order = ['b002-06','b002-07','b002-08','b002-09','b002-10'];
  const allOrdered = [...b001order, ...b002order, ...scripts.filter(s => !b001order.includes(s.id) && !b002order.includes(s.id)).map(s => s.id)];
  const schedule = [];
  let dayOffset = 0;
  allOrdered.forEach(id => {
    if (!scripts.find(s => s.id === id)) return;
    const d1 = new Date(today); d1.setDate(d1.getDate() + dayOffset);
    schedule.push({ scriptId: id, date: d1.toISOString().split('T')[0], type: 'reel' });
    const d2 = new Date(today); d2.setDate(d2.getDate() + dayOffset + 1);
    schedule.push({ scriptId: id, date: d2.toISOString().split('T')[0], type: 'carousel' });
    dayOffset += 2;
  });
  localStorage.setItem(SCHEDULE_KEY, JSON.stringify(schedule));
  return schedule;
}

function switchView(view) {
  document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
  const btn = document.querySelector(`.view-btn[data-view="${view}"]`) || document.querySelector(`.view-btn[onclick*="${view}"]`);
  if (btn) btn.classList.add('active');
  document.getElementById('board').classList.toggle('hidden', view !== 'board');
  document.getElementById('calendar').classList.toggle('visible', view === 'calendar');
  const archiveEl = document.getElementById('archiveView');
  if (archiveEl) archiveEl.classList.toggle('visible', view === 'archive');
  if (view === 'calendar') renderCalendar();
  if (view === 'archive') renderArchive();
}

function renderCalendar() {
  const cal = document.getElementById('calendar');
  const schedule = getSchedule();
  const today = new Date(); today.setHours(0,0,0,0);
  
  // Get the month to show (month of first scheduled item, or current)
  const firstDate = schedule.length ? new Date(schedule[0].date) : today;
  const year = firstDate.getFullYear();
  const month = firstDate.getMonth();
  const monthName = firstDate.toLocaleString('default', { month: 'long', year: 'numeric' });
  
  const firstDay = new Date(year, month, 1).getDay();
  const daysInMonth = new Date(year, month + 1, 0).getDate();
  
  const days = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
  let html = `<div class="cal-month-nav"><div class="cal-month-title">üìÖ ${monthName}</div></div>`;
  html += '<div class="cal-grid">';
  days.forEach(d => { html += `<div class="cal-header">${d}</div>`; });
  
  // Empty cells before first day
  for (let i = 0; i < firstDay; i++) html += '<div class="cal-empty"></div>';
  
  for (let day = 1; day <= daysInMonth; day++) {
    const dateStr = `${year}-${String(month+1).padStart(2,'0')}-${String(day).padStart(2,'0')}`;
    const isToday = dateStr === today.toISOString().split('T')[0];
    const events = schedule.filter(e => e.date === dateStr);
    const hasContent = events.length > 0;
    
    html += `<div class="cal-day${isToday ? ' today' : ''}${hasContent ? ' has-content' : ''}">`;
    html += `<div class="cal-day-num">${day}</div>`;
    events.forEach(e => {
      const s = scripts.find(x => x.id === e.scriptId);
      if (!s) return;
      const isPosted = s.status === 'posted';
      const tag = PILLAR_TAGS[s.pillar] || { icon: 'üìù', cls: 'tag-system' };
      html += `<div class="cal-event ${e.type}${isPosted ? ' posted' : ''}" onclick="openModal('${s.id}')">`;
      html += `${e.type === 'reel' ? 'üé¨' : 'üñºÔ∏è'} ${s.title}`;
      html += '</div>';
    });
    html += '</div>';
  }
  
  html += '</div>';
  cal.innerHTML = html;
}

function archiveScript(id) {
  const s = scripts.find(x => x.id === id);
  if (!s) return;
  s.status = 'archived';
  s.archivedAt = new Date().toISOString();
  saveState();
  closeModal();
  render();
  renderProjects();
}

function restoreScript(id) {
  const s = scripts.find(x => x.id === id);
  if (!s) return;
  s.status = 'posted'; // restore to posted since archived ones were posted
  delete s.archivedAt;
  saveState();
  renderArchive();
  render();
  renderProjects();
}

function renderArchive() {
  const el = document.getElementById('archiveView');
  if (!el) return;
  const archived = scripts.filter(s => s.status === 'archived');
  if (archived.length === 0) {
    el.innerHTML = `<h3>üóÉÔ∏è Archive (0)</h3><p style="color:#4b5563;font-size:14px;font-style:italic;">No archived scripts yet. Archive posted scripts to keep things tidy.</p>`;
    return;
  }
  const cardsHTML = archived.map(s => {
    const tag = PILLAR_TAGS[s.pillar] || { cls: 'tag-system', icon: 'üìå' };
    const archivedDate = s.archivedAt ? new Date(s.archivedAt).toLocaleDateString() : '‚Äî';
    return `
      <div class="archive-card">
        <div class="card-title">${s.title}</div>
        <div class="card-meta"><span class="tag ${tag.cls}">${tag.icon} ${s.pillar}</span></div>
        <div class="card-hook">"${s.hook}"</div>
        <div class="archive-date">Archived: ${archivedDate}</div>
        <div style="display:flex;gap:8px;">
          <button class="restore-btn" onclick="restoreScript('${s.id}')">‚Ü© Restore</button>
          <button class="restore-btn" style="background:rgba(99,102,241,0.1);" onclick="openModal('${s.id}')">View Script</button>
        </div>
      </div>
    `;
  }).join('');
  el.innerHTML = `<h3>üóÉÔ∏è Archive (${archived.length})</h3><div class="archive-grid">${cardsHTML}</div>`;
}

// Fetch live stats from stats.json in the repo
async function fetchLiveStats() {
  try {
    const res = await fetch('https://shotasprunger1114-sys.github.io/cmp-kanban/stats.json?t=' + Date.now());
    if (!res.ok) return;
    const data = await res.json();
    if (!data.accounts) return;
    PROJECTS.forEach(p => {
      const live = data.accounts[p.id];
      if (!live) return;
      if (live.followers !== undefined) p.metrics.followers = live.followers;
      if (live.followersChange !== undefined) p.metrics.followersChange = live.followersChange;
      if (live.posts !== undefined) p.metrics.posts = live.posts;
      if (live.avgReach !== undefined) p.metrics.avgReach = live.avgReach;
      if (live.avgReachChange !== undefined) p.metrics.avgReachChange = live.avgReachChange;
      if (live.engRate !== undefined) p.metrics.engRate = live.engRate;
      if (live.topMetric !== undefined) p.metrics.topMetric = live.topMetric;
      if (live.topMetricVal !== undefined) p.metrics.topMetricVal = live.topMetricVal;
    });
    // Update lastUpdated label
    const lu = document.getElementById('statsLastUpdated');
    if (lu && data.lastUpdated) lu.textContent = 'Stats updated: ' + new Date(data.lastUpdated).toLocaleString();
    renderProjects();
  } catch(e) { /* fail silently, use hardcoded fallback */ }
}

async function init() {
  loadState();
  renderProjects();
  render();
  fetchLiveStats();
  // Sync new scripts from pipeline.json in GitHub repo (auto-updates when nightly pipeline runs)
  try {
    const res = await fetch('https://shotasprunger1114-sys.github.io/cmp-kanban/pipeline.json?t=' + Date.now());
    if (res.ok) {
      const pipeline = await res.json();
      const existingIds = new Set(scripts.map(s => s.id));
      let changed = false;
      const savedRaw = localStorage.getItem(STORAGE_KEY);
      const savedMap = {};
      if (savedRaw) {
        try { JSON.parse(savedRaw).scripts.forEach(s => savedMap[s.id] = s); } catch(e) {}
      }
      pipeline.scripts.forEach(p => {
        if (!existingIds.has(p.id)) {
          scripts.push({
            id: p.id, title: p.title, project: p.project || 'brandingwithshota',
            pillar: p.pillar, duration: p.duration || '60s', batch: p.batch,
            status: savedMap[p.id] ? savedMap[p.id].status : (p.status || 'new'),
            topic: p.topic || '', hook: p.hook,
            script: [{ label: 'HOOK', type: 'hook', text: p.hook }],
            value: '', cta: '', caption: '', hashtags: '', visuals: []
          });
          changed = true;
        }
      });
      if (changed) { renderProjects(); render(); }
    }
  } catch(e) { console.log('Pipeline sync skipped (offline or not yet pushed):', e); }
}
init();
</script>
</body>
</html>
